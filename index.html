<!doctype html>
<html lang="pl" data-theme-mode="auto" data-resolved-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0f766e">
  <title>Pretty-Mails</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./assets/icon-192.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="./assets/icon-192.svg">
  <script src="https://cdn.tiny.cloud/1/rvwao9ib8mj0j8bfxbp4dml22na1rnlbgwu4wvfkitbd7dr3/tinymce/8/tinymce.min.js" referrerpolicy="origin" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./app.css">
</head>
<body>
  <header class="app-header">
    <div class="topbar-section topbar-brand">
      <h1>Pretty-Mails</h1>
    </div>
    <div class="topbar-section topbar-template">
      <div class="mobile-template-picker">
        <label id="mobileTemplateLabel" for="mobileTemplateSelect">Szablon</label>
        <select id="mobileTemplateSelect" aria-label="Wybierz szablon"></select>
      </div>
    </div>

    <div class="topbar-section topbar-send">
      <button id="openPreviewModalTopBtn" class="button preview-topbar-btn" type="button">PodglÄ…d</button>
      <button id="exportBtn" class="button button-primary" type="button">Zapisz .eml</button>
      <button id="shareBtn" class="button" type="button">UdostÄ™pnij .eml</button>
    </div>

    <div class="topbar-section topbar-locale">
      <div class="language-menu" id="languageMenu">
        <button id="languageMenuBtn" class="button language-btn" type="button" aria-haspopup="listbox" aria-expanded="false" aria-label="JÄ™zyk interfejsu">
          <span id="languageFlag" class="language-flag" aria-hidden="true">ğŸ‡µğŸ‡±</span>
          <span class="language-caret" aria-hidden="true">â–¾</span>
        </button>
        <ul id="languageMenuList" class="language-menu-list" role="listbox" hidden>
          <li>
            <button type="button" class="language-option" data-lang="pl" role="option">
              <span class="language-flag" aria-hidden="true">ğŸ‡µğŸ‡±</span>
              <span id="languageOptionPl">Polski</span>
            </button>
          </li>
          <li>
            <button type="button" class="language-option" data-lang="en" role="option">
              <span class="language-flag" aria-hidden="true">ğŸ‡¬ğŸ‡§</span>
              <span id="languageOptionEn">English</span>
            </button>
          </li>
          <li>
            <button type="button" class="language-option" data-lang="uk" role="option">
              <span class="language-flag" aria-hidden="true">ğŸ‡ºğŸ‡¦</span>
              <span id="languageOptionUk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</span>
            </button>
          </li>
        </ul>
      </div>

      <label class="visually-hidden" id="languageModeLabel" for="languageMode">JÄ™zyk</label>
      <select id="languageMode" class="visually-hidden" aria-hidden="true" tabindex="-1">
        <option value="pl">Polski</option>
        <option value="en">English</option>
        <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
      </select>
      <button id="infoBtn" class="button" type="button" aria-haspopup="dialog" aria-controls="infoModal">â„¹ï¸</button>
    </div>
  </header>

  <main class="layout">
    <aside class="card templates-panel">
      <div class="panel-head">
        <h2 id="templatesTitle">Szablony</h2>
        <input id="templateSearch" type="search" placeholder="Szukaj po nazwie lub opisie" autocomplete="off">
      </div>
      <ul id="templateList" class="template-list" aria-label="Lista szablonÃ³w"></ul>
    </aside>

    <section class="workspace">
      <div class="editor-column">
        <section class="card editor-panel">
          <h2 id="editorTitle">Edycja</h2>

          <label class="field" data-field="to">
            <span id="fieldToLabel">Adresat</span>
            <input id="fieldTo" type="text" placeholder="adres@example.com" autocomplete="email">
          </label>

          <div class="field-block">
            <span id="fieldCcLabel" class="field-mini-label">DW</span>
            <div class="field-toggle-row" data-field-row="cc">
              <label class="field-toggle field-toggle-inline">
                <input id="toggleCc" type="checkbox">
                <span id="toggleCcLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="cc">
                <input id="fieldCc" type="text" placeholder="adres@example.com, drugi@example.com" autocomplete="email">
              </label>
            </div>
          </div>

          <div class="field-block">
            <span id="fieldBccLabel" class="field-mini-label">UDW</span>
            <div class="field-toggle-row" data-field-row="bcc">
              <label class="field-toggle field-toggle-inline">
                <input id="toggleBcc" type="checkbox">
                <span id="toggleBccLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="bcc">
                <input id="fieldBcc" type="text" placeholder="adres@example.com" autocomplete="email">
              </label>
            </div>
          </div>

          <div class="field-block">
            <span id="fieldReplyToLabel" class="field-mini-label">Adres odpowiedzi</span>
            <div class="field-toggle-row" data-field-row="replyTo">
              <label class="field-toggle field-toggle-inline">
                <input id="toggleReplyTo" type="checkbox">
                <span id="toggleReplyToLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="replyTo">
                <input id="fieldReplyTo" type="text" placeholder="adres@example.com" autocomplete="email">
              </label>
            </div>
          </div>

          <div class="field-block">
            <span id="fieldSubjectLabel" class="field-mini-label">Temat</span>
            <div class="field-toggle-row" data-field-row="subject">
              <label class="field-toggle field-toggle-inline">
                <input id="toggleSubject" type="checkbox" checked>
                <span id="toggleSubjectLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="subject">
                <input id="fieldSubject" type="text" placeholder="Temat wiadomoÅ›ci" autocomplete="off">
              </label>
            </div>
          </div>

          <div class="field-block">
            <span id="fieldContentLabel" class="field-mini-label">TreÅ›Ä‡</span>
            <div class="field-toggle-row field-toggle-row-multiline" data-field-row="content">
              <label class="field-toggle field-toggle-inline">
                <input id="toggleContent" type="checkbox" checked>
                <span id="toggleContentLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="content">
                <textarea id="fieldContent" rows="10" placeholder="Wpisz treÅ›Ä‡ wiadomoÅ›ci..."></textarea>
              </label>
            </div>
          </div>

          <div class="field-block">
            <span id="fieldQuoteLabel" class="field-mini-label">Cytat</span>
            <div class="field-toggle-row field-toggle-row-multiline" data-field-row="quote">
              <label class="field-toggle field-toggle-inline">
                <input id="replyMode" type="checkbox">
                <span id="replyModeLabel">PokaÅ¼</span>
              </label>
              <label class="field" data-field="quote">
                <textarea id="fieldQuote" rows="4" placeholder="Wklej cytowany fragment, jeÅ›li to odpowiedÅº..."></textarea>
              </label>
            </div>
          </div>

          <label class="field" data-field="signatureName">
            <span id="fieldSignatureLabel">Nadawca</span>
            <input id="fieldSignatureName" type="text" placeholder="Twoje imiÄ™" autocomplete="name">
          </label>

          <div class="field-toggle-row field-toggle-row-auto">
            <label class="field-toggle field-toggle-inline">
              <input id="toggleDate" type="checkbox" checked>
              <span id="toggleDateLabel">Data</span>
            </label>
            <p class="auto-field-note" id="toggleDateHint">Data jest automatyczna i nie ma pola edycji.</p>
          </div>

          <div class="field-toggle-row field-toggle-row-auto">
            <label class="field-toggle field-toggle-inline">
              <input id="toggleTime" type="checkbox">
              <span id="toggleTimeLabel">Godzina</span>
            </label>
            <p class="auto-field-note" id="toggleTimeHint">Godzina jest automatyczna i nie ma pola edycji.</p>
          </div>

          <label class="remember-draft">
            <input id="rememberDraft" type="checkbox">
            <span id="rememberDraftLabel">ZapamiÄ™taj brudnopis lokalnie (bez zaÅ‚Ä…cznikÃ³w)</span>
          </label>

          <div id="addressValidation" class="form-validation" aria-live="polite"></div>

          <p class="muted-note" id="mutedNote">Puste pola opcjonalne nie sÄ… dodawane do wiadomoÅ›ci. TreÅ›Ä‡ jest bezpiecznie konwertowana z tekstu na HTML.</p>
        </section>

        <section class="card attachments-panel">
          <div class="attachments-head">
            <h2 id="attachmentsTitle">ZaÅ‚Ä…czniki</h2>
            <button id="addFilesBtn" class="button" type="button">Dodaj pliki</button>
            <input id="fileInput" type="file" multiple hidden>
          </div>

          <div id="dropZone" class="drop-zone" tabindex="0" role="button" aria-label="PrzeciÄ…gnij i upuÅ›Ä‡ pliki">
            PrzeciÄ…gnij i upuÅ›Ä‡ pliki tutaj lub uÅ¼yj przycisku â€Dodaj plikiâ€.
          </div>

          <ul id="attachmentList" class="attachment-grid" aria-live="polite"></ul>

          <div class="attachment-summary">
            <span id="attachmentCount">0 plikÃ³w</span>
            <span id="attachmentTotal">Suma: 0 B</span>
            <span id="attachmentEstimated">Szacowany rozmiar wiadomoÅ›ci: 0 B</span>
            <span id="attachmentWarning" class="warning-text"></span>
          </div>
        </section>
      </div>

      <section class="card preview-panel">
        <div class="preview-head">
          <h2 id="previewTitle">PodglÄ…d</h2>
          <div class="preview-head-right">
            <span id="previewTemplateName" class="preview-template-name"></span>
          </div>
        </div>
        <button id="openPreviewModalBtn" class="button preview-modal-trigger" type="button">OtwÃ³rz podglÄ…d</button>
        <div id="previewFields" class="preview-fields" aria-live="polite"></div>
        <div class="mail-canvas" id="mailCanvas">
          <iframe id="previewFrame" title="PodglÄ…d wiadomoÅ›ci" loading="eager"></iframe>
        </div>
      </section>
    </section>
  </main>

  <footer class="app-footer" hidden>
    <p id="footerNote"></p>
  </footer>

  <div id="infoModal" class="modal" hidden>
    <div class="modal-backdrop" data-modal-close></div>
    <section class="modal-card" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
      <div class="modal-head">
        <h2 id="infoModalTitle">â„¹ï¸ Jak to dziaÅ‚a</h2>
        <button id="infoModalClose" class="button" type="button" aria-label="Zamknij">âœ•</button>
      </div>
      <ul id="infoModalList" class="modal-list">
        <li>âœ‰ï¸ Aplikacja tworzy plik <code>.eml</code> z HTML i zaÅ‚Ä…cznikami.</li>
        <li>ğŸ’¾ â€Zapisz .emlâ€ pobiera plik na urzÄ…dzenie.</li>
        <li>ğŸ“¤ â€UdostÄ™pnij .emlâ€ otwiera systemowe udostÄ™pnianie.</li>
        <li>ğŸ“® WysÅ‚anie odbywa siÄ™ z Twojej aplikacji pocztowej i Twojego konta.</li>
      </ul>
    </section>
  </div>

  <div id="previewModal" class="modal" hidden>
    <div class="modal-backdrop" data-preview-close></div>
    <section class="modal-card preview-modal-card" role="dialog" aria-modal="true" aria-labelledby="previewModalTitle">
      <div class="modal-head">
        <h2 id="previewModalTitle">PodglÄ…d</h2>
        <button id="previewModalClose" class="button" type="button" data-preview-close aria-label="Zamknij">âœ•</button>
      </div>
      <div class="mail-canvas" id="previewModalCanvas">
        <iframe id="previewModalFrame" title="PodglÄ…d wiadomoÅ›ci" loading="eager"></iframe>
      </div>
    </section>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
